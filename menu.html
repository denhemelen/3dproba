<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ú–µ–Ω—é | NEON</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cosmic: {
              900: '#0f172a',
              800: '#1e293b',
            },
            neon: {
              cyan: '#00ffff',
              pink: '#ff00ff',
              purple: '#9d00ff'
            }
          },
          animation: {
            'neon-pulse': 'pulse 3s ease-in-out infinite',
            'float': 'float 6s ease-in-out infinite'
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-20px)' }
            }
          }
        }
      }
    }
  </script>
  <style>
    .error-message {
      color: #ff4444;
      font-size: 0.875rem;
      margin-top: 0.25rem;
      display: none;
    }
    .loader {
      border: 4px solid rgba(255, 255, 255, 0.3);
      border-radius: 50%;
      border-top: 4px solid #00ffff;
      width: 24px;
      height: 24px;
      animation: spin 1s linear infinite;
      margin: 0 auto;
      display: none;
    }
    @keyframes spin {
      0% { transform: rotate(0deg); }
      100% { transform: rotate(360deg); }
    }
    .cart-item {
      transition: transform 0.3s ease-in-out;
    }
    .nav-btn {
      transition: opacity 0.3s ease;
    }
    .nav-btn:hover {
      opacity: 0.8;
    }
  </style>
  
  <!-- Firebase App (–æ—Å–Ω–æ–≤–Ω–∏–π SDK) -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <!-- Firebase Authentication -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDcfe3Qiuz2QOr45xX3oP3ZW-O08-f2udg",
      authDomain: "coffee-b3e1c.firebaseapp.com",
      projectId: "coffee-b3e1c",
      storageBucket: "coffee-b3e1c.appspot.com",
      messagingSenderId: "205271337323",
      appId: "1:205271337323:web:56fab605972410ef9d242e"
    };

    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Firebase
    firebase.initializeApp(firebaseConfig);
  </script>
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-firestore-compat.js"></script>
</head>
<body class="bg-cosmic-900 text-gray-100 font-sans overflow-x-hidden">



<div class="container mx-auto my-8 max-w-lg bg-cosmic-800 rounded-xl p-6 shadow-lg">
  <h2 class="text-2xl font-bold text-neon-cyan mb-4">–î–æ–¥–∞—Ç–∏ —Ç–æ–≤–∞—Ä —É –º–µ–Ω—é</h2>
  <form id="addProductForm" class="space-y-4">
    <input type="text" id="productName" placeholder="–ù–∞–∑–≤–∞ —Ç–æ–≤–∞—Ä—É" required class="w-full p-2 rounded bg-cosmic-900 border border-neon-cyan text-white focus:outline-none" />
    <input type="number" id="productPrice" placeholder="–¶—ñ–Ω–∞" required class="w-full p-2 rounded bg-cosmic-900 border border-neon-cyan text-white focus:outline-none" />
    <input type="text" id="productImage" placeholder="–ù–∞–∑–≤–∞ —Ñ–∞–π–ª—É –∑–æ–±—Ä–∞–∂–µ–Ω–Ω—è (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, latte.jpg)" required class="w-full p-2 rounded bg-cosmic-900 border border-neon-cyan text-white focus:outline-none" />
    <input type="text" id="productDesc" placeholder="–û–ø–∏—Å" required class="w-full p-2 rounded bg-cosmic-900 border border-neon-cyan text-white focus:outline-none" />
    <button type="submit" class="w-full bg-neon-cyan text-black font-bold py-2 rounded-full hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏</button>
    <div id="addProductMsg" class="text-neon-pink mt-2"></div>
  </form>
</div>




  <!-- –•–µ–¥–µ—Ä -->
  <header class="fixed top-0 left-0 w-full z-50 bg-cosmic-900/80 backdrop-blur-lg border-b border-neon-cyan/20">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
      <a href="/" class="text-3xl font-bold text-neon-cyan hover:text-neon-pink transition-colors duration-300">
        NEON
      </a>
      <nav class="hidden md:flex space-x-8">
        <a href="/" class="nav-link text-gray-300 hover:text-neon-cyan">–ì–æ–ª–æ–≤–Ω–∞</a>
        <a href="/menu.html" class="nav-link text-neon-cyan hover:text-neon-pink">–ú–µ–Ω—é</a>
        <a href="/gallery.html" class="nav-link text-gray-300 hover:text-neon-cyan">–ì–∞–ª–µ—Ä–µ—è</a>
        <a href="/contacts.html" class="nav-link text-gray-300 hover:text-neon-cyan">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
      </nav>
      <div class="flex items-center space-x-4">
        <div id="userInfo" class="hidden flex items-center space-x-2">
          <span id="userNickname" class="text-neon-cyan"></span>
          <span class="text-gray-400">|</span>
        </div>
        <button id="authBtn" onclick="toggleAuthModal()" class="text-neon-cyan hover:text-neon-pink transition font-semibold">
          –£–≤—ñ–π—Ç–∏
        </button>
        <button id="logoutBtn" onclick="handleLogout()" class="text-neon-pink hover:text-neon-cyan transition font-semibold hidden">
          –í–∏–π—Ç–∏
        </button>
        <button onclick="toggleCart()" class="relative px-4 py-2 bg-neon-pink text-cosmic-900 font-bold rounded hover:bg-neon-cyan transition md:ml-4">
          üõí
          <span id="cartCount" class="absolute -top-2 -right-2 bg-neon-cyan text-cosmic-900 text-xs font-bold rounded-full h-5 w-5 flex items-center justify-center hidden">0</span>
        </button>
      </div>
    </div>
  </header>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó -->
  <div id="authModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 hidden">
    <div class="bg-cosmic-800 p-8 rounded-2xl w-full max-w-md text-white relative">
      <button onclick="toggleAuthModal()" class="absolute top-3 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
      <h2 class="text-2xl font-bold mb-4" id="authTitle">–£–≤—ñ–π—Ç–∏</h2>
      
      <div id="errorContainer" class="mb-4 text-red-500 text-sm hidden"></div>

      <!-- –ü–æ–ª–µ –¥–ª—è —ñ–º–µ–Ω—ñ (—Ç—ñ–ª—å–∫–∏ –ø—Ä–∏ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó) -->
      <div id="nameField" class="hidden">
        <input type="text" id="displayName" placeholder="–í–∞—à–µ —ñ–º'—è" class="w-full mb-3 p-2 rounded bg-cosmic-900 border border-neon-cyan text-white focus:outline-none" />
        <div id="nameError" class="error-message">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –≤–∞—à–µ —ñ–º'—è</div>
      </div>

      <input type="email" id="email" placeholder="Email" class="w-full mb-3 p-2 rounded bg-cosmic-900 border border-neon-cyan text-white focus:outline-none" />
      <div id="emailError" class="error-message">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–∏–π email</div>

      <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" class="w-full mb-4 p-2 rounded bg-cosmic-900 border border-neon-cyan text-white focus:outline-none" />
      <div id="passwordError" class="error-message">–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ —â–æ–Ω–∞–π–º–µ–Ω—à–µ 6 —Å–∏–º–≤–æ–ª—ñ–≤</div>

      <button onclick="handleAuth()" class="w-full bg-neon-cyan text-black font-bold py-2 rounded-full mb-3 flex justify-center items-center gap-2" id="authButton">
        <span id="authButtonText">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</span>
        <div id="authSpinner" class="loader"></div>
      </button>
      <p class="text-sm text-center text-gray-400">
        <span id="toggleText">–©–µ –Ω–µ –º–∞—î—à –∞–∫–∞—É–Ω—Ç—É?</span>
        <button onclick="toggleForm()" class="text-neon-cyan underline ml-1" id="toggleButton">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Å—è</button>
      </p>
    </div>
  </div>

  <!-- –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="relative z-10 pt-24 pb-16 min-h-screen px-6">
    <section class="container mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
      <!-- –ö–∞—Ä—Ç–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤ -->
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="images/latte.jpg" alt="–õ–∞—Ç–µ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–õ–∞—Ç–µ</h2>
        <p class="text-gray-400 mb-2">–ù—ñ–∂–Ω–∞ –∫–∞–≤–∞ –∑ –º–æ–ª–æ–∫–æ–º</p>
        <p class="text-neon-pink font-bold mb-4">65 –≥—Ä–Ω</p>
        <button onclick="addToCart('–õ–∞—Ç–µ', 65)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/cappuccino.jpg" alt="–ö–∞–ø—É—á–∏–Ω–æ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ö–∞–ø—É—á–∏–Ω–æ</h2>
        <p class="text-gray-400 mb-2">–ö–ª–∞—Å–∏—á–Ω–∞ –∫–∞–≤–∞ –∑ –ø—ñ–Ω–∫–æ—é</p>
        <p class="text-neon-pink font-bold mb-4">60 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ö–∞–ø—É—á–∏–Ω–æ', 60)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/espresso.jpg" alt="–ï—Å–ø—Ä–µ—Å–æ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ï—Å–ø—Ä–µ—Å–æ</h2>
        <p class="text-gray-400 mb-2">–ú—ñ—Ü–Ω–∞ –∫–∞–≤–∞ –¥–ª—è —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö –ø–æ—Ü—ñ–Ω–æ–≤—É–≤–∞—á—ñ–≤</p>
        <p class="text-neon-pink font-bold mb-4">55 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ï—Å–ø—Ä–µ—Å–æ', 55)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/americano.jpg" alt="–ê–º–µ—Ä–∏–∫–∞–Ω–æ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ê–º–µ—Ä–∏–∫–∞–Ω–æ</h2>
        <p class="text-gray-400 mb-2">–†–æ–∑–±–∞–≤–ª–µ–Ω–∏–π –µ—Å–ø—Ä–µ—Å–æ, –º'—è–∫–∏–π —Å–º–∞–∫</p>
        <p class="text-neon-pink font-bold mb-4">50 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ê–º–µ—Ä–∏–∫–∞–Ω–æ', 50)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/mocha.jpg" alt="–ú–æ–∫–∞—á–∏–Ω–æ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ú–æ–∫–∞—á–∏–Ω–æ</h2>
        <p class="text-gray-400 mb-2">–ö–∞–≤–∞ –∑ —à–æ–∫–æ–ª–∞–¥–æ–º</p>
        <p class="text-neon-pink font-bold mb-4">70 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ú–æ–∫–∞—á–∏–Ω–æ', 70)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/flatwhite.jpg" alt="–§–ª–µ—Ç –í–∞–π—Ç" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–§–ª–µ—Ç –í–∞–π—Ç</h2>
        <p class="text-gray-400 mb-2">–Ü–¥–µ–∞–ª—å–Ω–∏–π –±–∞–ª–∞–Ω—Å –µ—Å–ø—Ä–µ—Å–æ —ñ –º–æ–ª–æ–∫–∞</p>
        <p class="text-neon-pink font-bold mb-4">65 –≥—Ä–Ω</p>
        <button onclick="addToCart('–§–ª–µ—Ç –í–∞–π—Ç', 65)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/raf.jpg" alt="–†–∞—Ñ –∫–∞–≤–∞" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–†–∞—Ñ –∫–∞–≤–∞</h2>
        <p class="text-gray-400 mb-2">–ö–∞–≤–∞ –∑ –≤–µ—Ä—à–∫–∞–º–∏ —Ç–∞ –≤–∞–Ω—ñ–ª–ª—é</p>
        <p class="text-neon-pink font-bold mb-4">75 –≥—Ä–Ω</p>
        <button onclick="addToCart('–†–∞—Ñ –∫–∞–≤–∞', 75)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/coldbrew.jpg" alt="Cold Brew" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">Cold Brew</h2>
        <p class="text-gray-400 mb-2">–•–æ–ª–æ–¥–Ω–∞ –∫–∞–≤–∞ —Ç—Ä–∏–≤–∞–ª–æ–≥–æ –Ω–∞—Å—Ç–æ—é–≤–∞–Ω–Ω—è</p>
        <p class="text-neon-pink font-bold mb-4">80 –≥—Ä–Ω</p>
        <button onclick="addToCart('Cold Brew', 80)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/tiramisu.jpg" alt="–¢—ñ—Ä–∞–º—ñ—Å—É" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–¢—ñ—Ä–∞–º—ñ—Å—É</h2>
        <p class="text-gray-400 mb-2">–ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏–π —ñ—Ç–∞–ª—ñ–π—Å—å–∫–∏–π –¥–µ—Å–µ—Ä—Ç</p>
        <p class="text-neon-pink font-bold mb-4">85 –≥—Ä–Ω</p>
        <button onclick="addToCart('–¢—ñ—Ä–∞–º—ñ—Å—É', 85)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/cheesecake.jpg" alt="–ß—ñ–∑–∫–µ–π–∫" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ß—ñ–∑–∫–µ–π–∫</h2>
        <p class="text-gray-400 mb-2">–ö–ª–∞—Å–∏—á–Ω–∏–π –≤–∞–Ω—ñ–ª—å–Ω–∏–π —á—ñ–∑–∫–µ–π–∫</p>
        <p class="text-neon-pink font-bold mb-4">80 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ß—ñ–∑–∫–µ–π–∫', 80)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    </section>
  </main>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∫–æ—à–∏–∫–∞ -->
  <div id="cartModal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
    <div class="bg-cosmic-800 p-6 rounded-xl w-full max-w-md text-left relative">
      <button onclick="toggleCart()" class="absolute top-2 right-2 text-neon-pink text-xl">‚úñ</button>
      <h2 class="text-2xl text-neon-cyan font-bold mb-4">–í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
      
      <!-- –ö–æ–Ω—Ç–µ–π–Ω–µ—Ä –¥–ª—è –≥–æ—Ä—Ç–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤ -->
      <div class="relative overflow-hidden mb-4 h-64">
        <div id="cartItemsContainer" class="flex transition-transform duration-300 ease-in-out h-full">
          <!-- –¢–æ–≤–∞—Ä–∏ –±—É–¥—É—Ç—å –¥–æ–¥–∞–≤–∞—Ç–∏—Å—å —Å—é–¥–∏ -->
        </div>
        
        <!-- –ö–Ω–æ–ø–∫–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó -->
        <button id="prevItem" class="absolute left-2 top-1/2 transform -translate-y-1/2 bg-cosmic-700/80 text-neon-cyan rounded-full w-8 h-8 flex items-center justify-center hover:bg-cosmic-600 nav-btn hidden">
          &lt;
        </button>
        <button id="nextItem" class="absolute right-2 top-1/2 transform -translate-y-1/2 bg-cosmic-700/80 text-neon-cyan rounded-full w-8 h-8 flex items-center justify-center hover:bg-cosmic-600 nav-btn hidden">
          &gt;
        </button>
      </div>
      
      <p id="currentPosition" class="text-center text-gray-400 mb-2">0/0</p>
      <p id="total" class="text-neon-pink font-bold mb-4 text-center text-xl"></p>
      
      <button onclick="proceedToCheckout()" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition w-full mb-2" id="checkoutBtn">
        –û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
      </button>
      <button onclick="clearCart()" class="px-4 py-2 bg-cosmic-700 text-gray-200 font-bold rounded hover:bg-cosmic-600 transition w-full">
        –û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫
      </button>
    </div>
  </div>

  <script>
    // –°—Ç–∞–Ω —Ñ–æ—Ä–º–∏ (–ª–æ–≥—ñ–Ω/—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è)
    let isLoginForm = true;
    
    // –ï–ª–µ–º–µ–Ω—Ç–∏ DOM
    const authModal = document.getElementById('authModal');
    const authTitle = document.getElementById('authTitle');
    const toggleText = document.getElementById('toggleText');
    const toggleButton = document.getElementById('toggleButton');
    const authButton = document.getElementById('authButton');
    const authButtonText = document.getElementById('authButtonText');
    const authSpinner = document.getElementById('authSpinner');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const displayNameInput = document.getElementById('displayName');
    const emailError = document.getElementById('emailError');
    const passwordError = document.getElementById('passwordError');
    const nameError = document.getElementById('nameError');
    const errorContainer = document.getElementById('errorContainer');
    const authBtn = document.getElementById('authBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const userInfo = document.getElementById('userInfo');
    const userNickname = document.getElementById('userNickname');
    const nameField = document.getElementById('nameField');
    const cartCount = document.getElementById('cartCount');
    const checkoutBtn = document.getElementById('checkoutBtn');

    // –ó–º—ñ–Ω–Ω—ñ –¥–ª—è –≥–æ—Ä—Ç–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
    let currentItemIndex = 0;
    let cartItems = [];

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    document.addEventListener('DOMContentLoaded', () => {
      checkAuthState();
      updateCartCount();
    });

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
    function checkAuthState() {
      firebase.auth().onAuthStateChanged(user => {
        if (user) {
          authBtn.classList.add('hidden');
          logoutBtn.classList.remove('hidden');
          userInfo.classList.remove('hidden');
          
          const displayName = user.displayName || user.email.split('@')[0];
          userNickname.textContent = displayName;
          
          if (authModal) authModal.classList.add('hidden');
        } else {
          authBtn.classList.remove('hidden');
          logoutBtn.classList.add('hidden');
          userInfo.classList.add('hidden');
        }
      });
    }

    // –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
    function toggleAuthModal() {
      authModal.classList.toggle('hidden');
      resetErrors();
    }

    // –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –º—ñ–∂ —Ñ–æ—Ä–º–∞–º–∏ –ª–æ–≥—ñ–Ω—É —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
    function toggleForm() {
      isLoginForm = !isLoginForm;
      
      if (isLoginForm) {
        nameField.classList.add('hidden');
        authTitle.textContent = '–£–≤—ñ–π—Ç–∏';
        toggleText.textContent = '–©–µ –Ω–µ –º–∞—î—à –∞–∫–∞—É–Ω—Ç—É?';
        toggleButton.textContent = '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Å—è';
        authButtonText.textContent = '–£–≤—ñ–π—Ç–∏';
      } else {
        nameField.classList.remove('hidden');
        authTitle.textContent = '–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è';
        toggleText.textContent = '–í–∂–µ –º–∞—î—à –∞–∫–∞—É–Ω—Ç?';
        toggleButton.textContent = '–£–≤—ñ–π—Ç–∏';
        authButtonText.textContent = '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è';
      }
      
      resetErrors();
    }

    // –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è —Å—Ç–∞–Ω—É –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—è
    function setLoading(isLoading) {
      if (isLoading) {
        authButton.disabled = true;
        authButtonText.textContent = '';
        authSpinner.style.display = 'block';
      } else {
        authButton.disabled = false;
        authButtonText.textContent = isLoginForm ? '–£–≤—ñ–π—Ç–∏' : '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è';
        authSpinner.style.display = 'none';
      }
    }

    // –û–±—Ä–æ–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó/—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
    function handleAuth() {
      const email = emailInput.value;
      const password = passwordInput.value;
      const displayName = displayNameInput ? displayNameInput.value.trim() : '';
      
      if (!validateForm(email, password, displayName)) {
        return;
      }
      
      setLoading(true);
      
      if (isLoginForm) {
        firebase.auth().signInWithEmailAndPassword(email, password)
          .then(() => {
            toggleAuthModal();
          })
          .catch(error => {
            showError(getAuthErrorMessage(error));
          })
          .finally(() => {
            setLoading(false);
          });
      } else {
        firebase.auth().createUserWithEmailAndPassword(email, password)
          .then((userCredential) => {
            return userCredential.user.updateProfile({
              displayName: displayName || email.split('@')[0]
            });
          })
          .then(() => {
            toggleAuthModal();
          })
          .catch(error => {
            showError(getAuthErrorMessage(error));
          })
          .finally(() => {
            setLoading(false);
          });
      }
    }

    // –í–∏—Ö—ñ–¥ –∑ –∞–∫–∞—É–Ω—Ç—É
    function handleLogout() {
      firebase.auth().signOut()
        .then(() => {
          checkAuthState();
        })
        .catch(error => {
          console.error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ:', error);
        });
    }

    // –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–æ—Ä–º–∏
    function validateForm(email, password, displayName = '') {
      let isValid = true;
      
      if (!isLoginForm && displayName === '') {
        nameError.style.display = 'block';
        isValid = false;
      } else {
        nameError.style.display = 'none';
      }
      
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        emailError.style.display = 'block';
        isValid = false;
      } else {
        emailError.style.display = 'none';
      }
      
      if (password.length < 6) {
        passwordError.style.display = 'block';
        isValid = false;
      } else {
        passwordError.style.display = 'none';
      }
      
      return isValid;
    }

    // –°–∫–∏–¥–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
    function resetErrors() {
      nameError.style.display = 'none';
      emailError.style.display = 'none';
      passwordError.style.display = 'none';
      errorContainer.classList.add('hidden');
      errorContainer.textContent = '';
    }

    // –ü–æ–∫–∞–∑ –ø–æ–º–∏–ª–∫–∏
    function showError(message) {
      errorContainer.textContent = message;
      errorContainer.classList.remove('hidden');
    }

    // –ü–µ—Ä–µ–∫–ª–∞–¥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ Firebase
    function getAuthErrorMessage(error) {
      switch (error.code) {
        case 'auth/invalid-email': return '–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email';
        case 'auth/user-disabled': return '–¶–µ–π –∞–∫–∞—É–Ω—Ç –±—É–ª–æ –≤–∏–º–∫–Ω–µ–Ω–æ';
        case 'auth/user-not-found': return '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ç–∞–∫–∏–º email –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ';
        case 'auth/wrong-password': return '–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å';
        case 'auth/email-already-in-use': return '–¶–µ–π email –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è';
        case 'auth/weak-password': return '–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ —â–æ–Ω–∞–π–º–µ–Ω—à–µ 6 —Å–∏–º–≤–æ–ª—ñ–≤';
        case 'auth/operation-not-allowed': return '–¶—è –æ–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ –¥–æ–∑–≤–æ–ª–µ–Ω–∞';
        default: return '–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.';
      }
    }

    // –ö–æ—à–∏–∫
    function addToCart(name, price) {
      checkAuthBeforeOrder()
        .then(() => {
          const item = { name, price };
          const cart = JSON.parse(localStorage.getItem('cart') || '[]');
          cart.push(item);
          localStorage.setItem('cart', JSON.stringify(cart));
          updateCartModal();
          updateCartCount();
        })
        .catch(() => {
          toggleAuthModal();
        });
    }

    function toggleCart() {
      const modal = document.getElementById('cartModal');
      modal.classList.toggle('hidden');
      if (!modal.classList.contains('hidden')) {
        updateCartModal();
      }
    }

    function updateCartModal() {
        cartItems = JSON.parse(localStorage.getItem('cart') || '[]');

      const container = document.getElementById('cartItemsContainer');
      const totalText = document.getElementById('total');
      const positionText = document.getElementById('currentPosition');
      const prevBtn = document.getElementById('prevItem');
      const nextBtn = document.getElementById('nextItem');
      
      container.innerHTML = '';
      let total = 0;

      if (cartItems.length === 0) {
        container.innerHTML = '<div class="w-full flex-shrink-0 flex items-center justify-center text-gray-400">–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</div>';
        totalText.textContent = '';
        positionText.textContent = '0/0';
        checkoutBtn.classList.add('hidden');
        prevBtn.classList.add('hidden');
        nextBtn.classList.add('hidden');
      } else {
        cartItems.forEach((item, index) => {
          const itemElement = document.createElement('div');
          itemElement.className = 'w-full flex-shrink-0 px-2 h-full';
          itemElement.innerHTML = `
            <div class="bg-cosmic-700 p-4 rounded-lg h-full flex flex-col">
              <h3 class="text-xl font-bold text-neon-cyan mb-2">${item.name}</h3>
              <p class="text-gray-300 mb-4">–¶—ñ–Ω–∞: ${item.price} –≥—Ä–Ω</p>
              <img src="/images/${item.name.toLowerCase().replace(' ', '')}.jpg" alt="${item.name}" class="w-full h-32 object-cover rounded-lg mb-4">
              <button onclick="removeFromCart(${index})" class="mt-auto px-3 py-1 bg-neon-pink text-cosmic-900 text-sm rounded hover:bg-neon-cyan transition">
                –í–∏–¥–∞–ª–∏—Ç–∏
              </button>
            </div>
          `;
          container.appendChild(itemElement);
          total += item.price;
        });

        totalText.textContent = `–ó–∞–≥–∞–ª–æ–º: ${total} –≥—Ä–Ω`;
        positionText.textContent = `${currentItemIndex + 1}/${cartItems.length}`;
        checkoutBtn.classList.remove('hidden');
        
        // –ü–æ–∫–∞–∑—É—î–º–æ/—Ö–æ–≤–∞—î–º–æ –∫–Ω–æ–ø–∫–∏ –Ω–∞–≤—ñ–≥–∞—Ü—ñ—ó
        prevBtn.classList.toggle('hidden', cartItems.length <= 1);
        nextBtn.classList.toggle('hidden', cartItems.length <= 1);
        
        // –û–Ω–æ–≤–ª—é—î–º–æ –ø–æ–∑–∏—Ü—ñ—é –µ–ª–µ–º–µ–Ω—Ç—ñ–≤
        updateCartItemsPosition();
      }
    }

    function updateCartItemsPosition() {
      const container = document.getElementById('cartItemsContainer');
      container.style.transform = `translateX(-${currentItemIndex * 100}%)`;
      document.getElementById('currentPosition').textContent = `${currentItemIndex + 1}/${cartItems.length}`;
    }

    // –§—É–Ω–∫—Ü—ñ—ó –¥–ª—è –≥–æ—Ä—Ç–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
    document.getElementById('nextItem').addEventListener('click', () => {
      if (currentItemIndex < cartItems.length - 1) {
        currentItemIndex++;
        updateCartItemsPosition();
      }
    });

    document.getElementById('prevItem').addEventListener('click', () => {
      if (currentItemIndex > 0) {
        currentItemIndex--;
        updateCartItemsPosition();
      }
    });

    // –§—É–Ω–∫—Ü—ñ—è –¥–ª—è –≤–∏–¥–∞–ª–µ–Ω–Ω—è —Ç–æ–≤–∞—Ä—É –∑ –∫–æ—à–∏–∫–∞
    function removeFromCart(index) {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      cart.splice(index, 1);
      localStorage.setItem('cart', JSON.stringify(cart));
      
      // –û–Ω–æ–≤–ª—é—î–º–æ —ñ–Ω–¥–µ–∫—Å, —è–∫—â–æ –≤–∏–¥–∞–ª—è—î–º–æ –ø–æ—Ç–æ—á–Ω–∏–π –µ–ª–µ–º–µ–Ω—Ç
      if (currentItemIndex >= cart.length) {
        currentItemIndex = Math.max(0, cart.length - 1);
      }
      
      updateCartModal();
      updateCartCount();
    }

    function updateCartCount() {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      
      if (cart.length > 0) {
        cartCount.textContent = cart.length;
        cartCount.classList.remove('hidden');
      } else {
        cartCount.classList.add('hidden');
      }
    }

    function clearCart() {
      localStorage.removeItem('cart');
      currentItemIndex = 0;
      updateCartModal();
      updateCartCount();
    }

    function proceedToCheckout() {
      checkAuthBeforeOrder()
        .then((user) => {
          const cart = JSON.parse(localStorage.getItem('cart') || '[]');
          if (cart.length === 0) {
            showError('–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π!');
            return;
          }
          
          const total = cart.reduce((sum, item) => sum + item.price, 0);
          alert(`–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ —Å—É–º—É ${total} –≥—Ä–Ω –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ!\n–î—è–∫—É—î–º–æ, ${user.displayName || user.email.split('@')[0]}!`);
          
          // –¢—É—Ç –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –≤—ñ–¥–ø—Ä–∞–≤–∫—É –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ —Å–µ—Ä–≤–µ—Ä
          // –ù–∞–ø—Ä–∏–∫–ª–∞–¥: sendOrderToServer(user.uid, cart, total);
          
          clearCart();
          toggleCart();
        })
        .catch(() => {
          toggleAuthModal();
          toggleCart();
        });
    }

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –ø–µ—Ä–µ–¥ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º
    function checkAuthBeforeOrder() {
      return new Promise((resolve, reject) => {
        const user = firebase.auth().currentUser;
        if (user) {
          resolve(user);
        } else {
          reject('–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π');
        }
      });
    }







      // Firestore —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è
  const db = firebase.firestore();

  // –î–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—É —á–µ—Ä–µ–∑ —Ñ–æ—Ä–º—É
  document.getElementById('addProductForm').addEventListener('submit', async function(e) {
    e.preventDefault();
    const name = document.getElementById('productName').value.trim();
    const price = Number(document.getElementById('productPrice').value);
    const image = document.getElementById('productImage').value.trim();
    const description = document.getElementById('productDesc').value.trim();
    const msg = document.getElementById('addProductMsg');

    if (!name || !price || !image || !description) {
      msg.textContent = '–ó–∞–ø–æ–≤–Ω—ñ—Ç—å –≤—Å—ñ –ø–æ–ª—è!';
      return;
    }

    try {
      await db.collection('products').add({
        name,
        price,
        image,
        description,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      });
      msg.textContent = '–¢–æ–≤–∞—Ä –¥–æ–¥–∞–Ω–æ!';
      this.reset();
    } catch (error) {
      msg.textContent = '–ü–æ–º–∏–ª–∫–∞: ' + error.message;
    }
  });






  // –î–û–î–ê–ô–¢–ï –¶–ï –í–ù–ò–ó–£ –í–ê–®–û–ì–û <script> (–ø—ñ—Å–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó Firestore)

async function addInitialProducts() {
  const products = [
    {
      name: "–õ–∞—Ç–µ",
      price: 65,
      image: "latte.jpg",
      description: "–ù—ñ–∂–Ω–∞ –∫–∞–≤–∞ –∑ –º–æ–ª–æ–∫–æ–º"
    },
    {
      name: "–ö–∞–ø—É—á–∏–Ω–æ",
      price: 60,
      image: "cappuccino.jpg",
      description: "–ö–ª–∞—Å–∏—á–Ω–∞ –∫–∞–≤–∞ –∑ –ø—ñ–Ω–∫–æ—é"
    },
    {
      name: "–ï—Å–ø—Ä–µ—Å–æ",
      price: 55,
      image: "espresso.jpg",
      description: "–ú—ñ—Ü–Ω–∞ –∫–∞–≤–∞ –¥–ª—è —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö –ø–æ—Ü—ñ–Ω–æ–≤—É–≤–∞—á—ñ–≤"
    },
    {
      name: "–ê–º–µ—Ä–∏–∫–∞–Ω–æ",
      price: 50,
      image: "/images/americano.jpg",
      description: "–†–æ–∑–±–∞–≤–ª–µ–Ω–∏–π –µ—Å–ø—Ä–µ—Å–æ, –º'—è–∫–∏–π —Å–º–∞–∫"
    },
    {
      name: "–ú–æ–∫–∞—á–∏–Ω–æ",
      price: 70,
      image: "mocha.jpg",
      description: "–ö–∞–≤–∞ –∑ —à–æ–∫–æ–ª–∞–¥–æ–º"
    },
    {
      name: "–§–ª–µ—Ç –í–∞–π—Ç",
      price: 65,
      image: "flatwhite.jpg",
      description: "–Ü–¥–µ–∞–ª—å–Ω–∏–π –±–∞–ª–∞–Ω—Å –µ—Å–ø—Ä–µ—Å–æ —ñ –º–æ–ª–æ–∫–∞"
    },
    {
      name: "–†–∞—Ñ –∫–∞–≤–∞",
      price: 75,
      image: "raf.jpg",
      description: "–ö–∞–≤–∞ –∑ –≤–µ—Ä—à–∫–∞–º–∏ —Ç–∞ –≤–∞–Ω—ñ–ª–ª—é"
    },
    {
      name: "Cold Brew",
      price: 80,
      image: "coldbrew.jpg",
      description: "–•–æ–ª–æ–¥–Ω–∞ –∫–∞–≤–∞ —Ç—Ä–∏–≤–∞–ª–æ–≥–æ –Ω–∞—Å—Ç–æ—é–≤–∞–Ω–Ω—è"
    },
    {
      name: "–¢—ñ—Ä–∞–º—ñ—Å—É",
      price: 85,
      image: "tiramisu.jpg",
      description: "–ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏–π —ñ—Ç–∞–ª—ñ–π—Å—å–∫–∏–π –¥–µ—Å–µ—Ä—Ç"
    },
    {
      name: "–ß—ñ–∑–∫–µ–π–∫",
      price: 80,
      image: "cheesecake.jpg",
      description: "–ö–ª–∞—Å–∏—á–Ω–∏–π –≤–∞–Ω—ñ–ª—å–Ω–∏–π —á—ñ–∑–∫–µ–π–∫"
    }
  ];

  for (const product of products) {
    await db.collection('products').add({
      ...product,
      createdAt: firebase.firestore.FieldValue.serverTimestamp()
    });
  }
  alert('–¢–æ–≤–∞—Ä–∏ –¥–æ–¥–∞–Ω–æ!');
}

// –í–∏–∫–ª–∏—á—Ç–µ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é –æ–¥–∏–Ω —Ä–∞–∑ –¥–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è —Ç–æ–≤–∞—Ä—ñ–≤
// addInitialProducts(); // –í–∏–∫–ª–∏–∫–∞–π—Ç–µ —Ü—é —Ñ—É–Ω–∫—Ü—ñ—é –ª–∏—à–µ –æ–¥–∏–Ω —Ä–∞–∑ –≤—Ä—É—á–Ω—É –¥–ª—è —ñ–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—ó —Ç–æ–≤–∞—Ä—ñ–≤
 
 
 
 
 
 function proceedToCheckout() {
  checkAuthBeforeOrder()
    .then((user) => {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      if (cart.length === 0) {
        showError('–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π!');
        return;
      }

      const total = cart.reduce((sum, item) => sum + item.price, 0);

      // –î–æ–¥–∞—î–º–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è —É Firestore
      db.collection('orders').add({
        userId: user.uid,
        userEmail: user.email,
        items: cart,
        total,
        createdAt: firebase.firestore.FieldValue.serverTimestamp()
      })
      .then(() => {
        alert(`–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –Ω–∞ —Å—É–º—É ${total} –≥—Ä–Ω –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ!\n–î—è–∫—É—î–º–æ, ${user.displayName || user.email.split('@')[0]}!`);
        clearCart();
        toggleCart();
      })
      .catch((error) => {
        showError('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—ñ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è: ' + error.message);
      });
    })
    .catch(() => {
      toggleAuthModal();
      toggleCart();
    });
}
 
 
 
 
 
 </script>
</body>
</html>