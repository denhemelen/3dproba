<!DOCTYPE html>
<html lang="uk">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>–ú–µ–Ω—é | NEON</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            cosmic: {
              900: '#0f172a',
              800: '#1e293b',
            },
            neon: {
              cyan: '#00ffff',
              pink: '#ff00ff',
              purple: '#9d00ff'
            }
          },
          animation: {
            'neon-pulse': 'pulse 3s ease-in-out infinite',
            'float': 'float 6s ease-in-out infinite'
          },
          keyframes: {
            float: {
              '0%, 100%': { transform: 'translateY(0)' },
              '50%': { transform: 'translateY(-20px)' }
            }
          }
        }
      }
    }
  </script>
  <style>
    .error-message {
      color: #ff4444;
      font-size: 0.875rem;
      margin-top: 0.25rem;
      display: none;
    }
  </style>
  
  <!-- Firebase App (–æ—Å–Ω–æ–≤–Ω–∏–π SDK) -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-app-compat.js"></script>
  <!-- Firebase Authentication -->
  <script src="https://www.gstatic.com/firebasejs/10.11.0/firebase-auth-compat.js"></script>
  <script>
    const firebaseConfig = {
      apiKey: "AIzaSyDcfe3Qiuz2QOr45xX3oP3ZW-O08-f2udg",
      authDomain: "coffee-b3e1c.firebaseapp.com",
      projectId: "coffee-b3e1c",
      storageBucket: "coffee-b3e1c.appspot.com",
      messagingSenderId: "205271337323",
      appId: "1:205271337323:web:56fab605972410ef9d242e"
    };

    // –Ü–Ω—ñ—Ü—ñ–∞–ª—ñ–∑–∞—Ü—ñ—è Firebase
    firebase.initializeApp(firebaseConfig);
  </script>
</head>
<body class="bg-cosmic-900 text-gray-100 font-sans overflow-x-hidden">

  <!-- –•–µ–¥–µ—Ä -->
  <header class="fixed top-0 left-0 w-full z-50 bg-cosmic-900/80 backdrop-blur-lg border-b border-neon-cyan/20">
    <div class="container mx-auto px-6 py-4 flex justify-between items-center">
      <a href="/" class="text-3xl font-bold text-neon-cyan hover:text-neon-pink transition-colors duration-300">
        NEON
      </a>
      <nav class="hidden md:flex space-x-8">
        <a href="/" class="nav-link text-gray-300 hover:text-neon-cyan">–ì–æ–ª–æ–≤–Ω–∞</a>
        <a href="/menu.html" class="nav-link text-neon-cyan hover:text-neon-pink">–ú–µ–Ω—é</a>
        <a href="/gallery.html" class="nav-link text-gray-300 hover:text-neon-cyan">–ì–∞–ª–µ—Ä–µ—è</a>
        <a href="/contacts.html" class="nav-link text-gray-300 hover:text-neon-cyan">–ö–æ–Ω—Ç–∞–∫—Ç–∏</a>
      </nav>
      <div class="flex items-center space-x-4">
        <div id="userInfo" class="hidden flex items-center space-x-2">
          <span id="userNickname" class="text-neon-cyan"></span>
          <span class="text-gray-400">|</span>
        </div>
        <button id="authBtn" onclick="toggleAuthModal()" class="text-neon-cyan hover:text-neon-pink transition font-semibold">
          –£–≤—ñ–π—Ç–∏
        </button>
        <button id="logoutBtn" onclick="handleLogout()" class="text-neon-pink hover:text-neon-cyan transition font-semibold hidden">
          –í–∏–π—Ç–∏
        </button>
        <button onclick="toggleCart()" class="relative px-4 py-2 bg-neon-pink text-cosmic-900 font-bold rounded hover:bg-neon-cyan transition md:ml-4">
          üõí
        </button>
      </div>
    </div>
  </header>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó -->
  <div id="authModal" class="fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-70 hidden">
    <div class="bg-cosmic-800 p-8 rounded-2xl w-full max-w-md text-white relative">
      <button onclick="toggleAuthModal()" class="absolute top-3 right-4 text-gray-400 hover:text-white text-2xl">&times;</button>
      <h2 class="text-2xl font-bold mb-4" id="authTitle">–£–≤—ñ–π—Ç–∏</h2>
      
      <div id="errorContainer" class="mb-4 text-red-500 text-sm hidden"></div>

      <input type="email" id="email" placeholder="Email" class="w-full mb-3 p-2 rounded bg-cosmic-900 border border-neon-cyan text-white focus:outline-none" />
      <div id="emailError" class="error-message">–ë—É–¥—å –ª–∞—Å–∫–∞, –≤–≤–µ–¥—ñ—Ç—å –∫–æ—Ä–µ–∫—Ç–Ω–∏–π email</div>

      <input type="password" id="password" placeholder="–ü–∞—Ä–æ–ª—å" class="w-full mb-4 p-2 rounded bg-cosmic-900 border border-neon-cyan text-white focus:outline-none" />
      <div id="passwordError" class="error-message">–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ —â–æ–Ω–∞–π–º–µ–Ω—à–µ 6 —Å–∏–º–≤–æ–ª—ñ–≤</div>

      <button onclick="handleAuth()" class="w-full bg-neon-cyan text-black font-bold py-2 rounded-full mb-3" id="authButton">–ü—Ä–æ–¥–æ–≤–∂–∏—Ç–∏</button>
      <p class="text-sm text-center text-gray-400">
        <span id="toggleText">–©–µ –Ω–µ –º–∞—î—à –∞–∫–∞—É–Ω—Ç—É?</span>
        <button onclick="toggleForm()" class="text-neon-cyan underline ml-1" id="toggleButton">–ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Å—è</button>
      </p>
    </div>
  </div>

  <!-- –ì–æ–ª–æ–≤–Ω–∏–π –∫–æ–Ω—Ç–µ–Ω—Ç -->
  <main class="relative z-10 pt-24 pb-16 min-h-screen px-6">
    <section class="container mx-auto grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8">
     <!-- –ö–∞—Ä—Ç–∫–∏ —Ç–æ–≤–∞—Ä—ñ–≤ -->
    <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/latte.jpg" alt="–õ–∞—Ç–µ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–õ–∞—Ç–µ</h2>
        <p class="text-gray-400 mb-2">–ù—ñ–∂–Ω–∞ –∫–∞–≤–∞ –∑ –º–æ–ª–æ–∫–æ–º</p>
        <p class="text-neon-pink font-bold mb-4">65 –≥—Ä–Ω</p>
        <button onclick="addToCart('–õ–∞—Ç–µ', 65)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/cappuccino.jpg" alt="–ö–∞–ø—É—á–∏–Ω–æ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ö–∞–ø—É—á–∏–Ω–æ</h2>
        <p class="text-gray-400 mb-2">–ö–ª–∞—Å–∏—á–Ω–∞ –∫–∞–≤–∞ –∑ –ø—ñ–Ω–∫–æ—é</p>
        <p class="text-neon-pink font-bold mb-4">60 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ö–∞–ø—É—á–∏–Ω–æ', 60)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/espresso.jpg" alt="–ï—Å–ø—Ä–µ—Å–æ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ï—Å–ø—Ä–µ—Å–æ</h2>
        <p class="text-gray-400 mb-2">–ú—ñ—Ü–Ω–∞ –∫–∞–≤–∞ –¥–ª—è —Å–ø—Ä–∞–≤–∂–Ω—ñ—Ö –ø–æ—Ü—ñ–Ω–æ–≤—É–≤–∞—á—ñ–≤</p>
        <p class="text-neon-pink font-bold mb-4">55 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ï—Å–ø—Ä–µ—Å–æ', 55)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/americano.jpg" alt="–ê–º–µ—Ä–∏–∫–∞–Ω–æ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ê–º–µ—Ä–∏–∫–∞–Ω–æ</h2>
        <p class="text-gray-400 mb-2">–†–æ–∑–±–∞–≤–ª–µ–Ω–∏–π –µ—Å–ø—Ä–µ—Å–æ, –º‚Äô—è–∫–∏–π —Å–º–∞–∫</p>
        <p class="text-neon-pink font-bold mb-4">50 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ê–º–µ—Ä–∏–∫–∞–Ω–æ', 50)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/mocha.jpg" alt="–ú–æ–∫–∞—á–∏–Ω–æ" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ú–æ–∫–∞—á–∏–Ω–æ</h2>
        <p class="text-gray-400 mb-2">–ö–∞–≤–∞ –∑ —à–æ–∫–æ–ª–∞–¥–æ–º</p>
        <p class="text-neon-pink font-bold mb-4">70 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ú–æ–∫–∞—á–∏–Ω–æ', 70)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/flatwhite.jpg" alt="–§–ª–µ—Ç –í–∞–π—Ç" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–§–ª–µ—Ç –í–∞–π—Ç</h2>
        <p class="text-gray-400 mb-2">–Ü–¥–µ–∞–ª—å–Ω–∏–π –±–∞–ª–∞–Ω—Å –µ—Å–ø—Ä–µ—Å–æ —ñ –º–æ–ª–æ–∫–∞</p>
        <p class="text-neon-pink font-bold mb-4">65 –≥—Ä–Ω</p>
        <button onclick="addToCart('–§–ª–µ—Ç –í–∞–π—Ç', 65)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/raf.jpg" alt="–†–∞—Ñ –∫–∞–≤–∞" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–†–∞—Ñ –∫–∞–≤–∞</h2>
        <p class="text-gray-400 mb-2">–ö–∞–≤–∞ –∑ –≤–µ—Ä—à–∫–∞–º–∏ —Ç–∞ –≤–∞–Ω—ñ–ª–ª—é</p>
        <p class="text-neon-pink font-bold mb-4">75 –≥—Ä–Ω</p>
        <button onclick="addToCart('–†–∞—Ñ –∫–∞–≤–∞', 75)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/coldbrew.jpg" alt="Cold Brew" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">Cold Brew</h2>
        <p class="text-gray-400 mb-2">–•–æ–ª–æ–¥–Ω–∞ –∫–∞–≤–∞ —Ç—Ä–∏–≤–∞–ª–æ–≥–æ –Ω–∞—Å—Ç–æ—é–≤–∞–Ω–Ω—è</p>
        <p class="text-neon-pink font-bold mb-4">80 –≥—Ä–Ω</p>
        <button onclick="addToCart('Cold Brew', 80)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/tiramisu.jpg" alt="–¢—ñ—Ä–∞–º—ñ—Å—É" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–¢—ñ—Ä–∞–º—ñ—Å—É</h2>
        <p class="text-gray-400 mb-2">–ù–∞–π–ø–æ–ø—É–ª—è—Ä–Ω—ñ—à–∏–π —ñ—Ç–∞–ª—ñ–π—Å—å–∫–∏–π –¥–µ—Å–µ—Ä—Ç</p>
        <p class="text-neon-pink font-bold mb-4">85 –≥—Ä–Ω</p>
        <button onclick="addToCart('–¢—ñ—Ä–∞–º—ñ—Å—É', 85)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    
      <div class="bg-cosmic-800 rounded-xl p-6 shadow-lg hover:shadow-neon-cyan transition">
        <img src="/images/cheesecake.jpg" alt="–ß—ñ–∑–∫–µ–π–∫" class="w-full h-48 object-cover rounded-lg mb-4">
        <h2 class="text-2xl font-bold text-neon-cyan mb-2">–ß—ñ–∑–∫–µ–π–∫</h2>
        <p class="text-gray-400 mb-2">–ö–ª–∞—Å–∏—á–Ω–∏–π –≤–∞–Ω—ñ–ª—å–Ω–∏–π —á—ñ–∑–∫–µ–π–∫</p>
        <p class="text-neon-pink font-bold mb-4">80 –≥—Ä–Ω</p>
        <button onclick="addToCart('–ß—ñ–∑–∫–µ–π–∫', 80)" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition">–î–æ–¥–∞—Ç–∏ –¥–æ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      </div>
    </section>
  </main>

  <!-- –ú–æ–¥–∞–ª—å–Ω–µ –≤—ñ–∫–Ω–æ –∫–æ—à–∏–∫–∞ -->
  <div id="cartModal" class="fixed inset-0 bg-black/70 backdrop-blur-sm flex items-center justify-center z-50 hidden">
    <div class="bg-cosmic-800 p-6 rounded-xl w-full max-w-md text-left relative">
      <button onclick="toggleCart()" class="absolute top-2 right-2 text-neon-pink text-xl">‚úñ</button>
      <h2 class="text-2xl text-neon-cyan font-bold mb-4">–í–∞—à–µ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</h2>
      <ul id="cartItems" class="mb-4 space-y-2 text-gray-200"></ul>
      <p id="total" class="text-neon-pink font-bold mb-4"></p>
      <button onclick="proceedToCheckout()" class="px-4 py-2 bg-neon-cyan text-cosmic-900 font-bold rounded hover:bg-neon-pink transition w-full mb-2">–û—Ñ–æ—Ä–º–∏—Ç–∏ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è</button>
      <button onclick="clearCart()" class="px-4 py-2 bg-cosmic-700 text-gray-200 font-bold rounded hover:bg-cosmic-600 transition w-full">–û—á–∏—Å—Ç–∏—Ç–∏ –∫–æ—à–∏–∫</button>
    </div>
  </div>

  <script>
    // –°—Ç–∞–Ω —Ñ–æ—Ä–º–∏ (–ª–æ–≥—ñ–Ω/—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—è)
    let isLoginForm = true;
    
    // –ï–ª–µ–º–µ–Ω—Ç–∏ DOM
    const authModal = document.getElementById('authModal');
    const authTitle = document.getElementById('authTitle');
    const toggleText = document.getElementById('toggleText');
    const toggleButton = document.getElementById('toggleButton');
    const authButton = document.getElementById('authButton');
    const emailInput = document.getElementById('email');
    const passwordInput = document.getElementById('password');
    const emailError = document.getElementById('emailError');
    const passwordError = document.getElementById('passwordError');
    const errorContainer = document.getElementById('errorContainer');
    const authBtn = document.getElementById('authBtn');
    const logoutBtn = document.getElementById('logoutBtn');
    const userInfo = document.getElementById('userInfo');
    const userNickname = document.getElementById('userNickname');

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –ø—Ä–∏ –∑–∞–≤–∞–Ω—Ç–∞–∂–µ–Ω–Ω—ñ —Å—Ç–æ—Ä—ñ–Ω–∫–∏
    document.addEventListener('DOMContentLoaded', () => {
      checkAuthState();
    });

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó
    function checkAuthState() {
      firebase.auth().onAuthStateChanged(user => {
        if (user) {
          // –ö–æ—Ä–∏—Å—Ç—É–≤–∞—á —É–≤—ñ–π—à–æ–≤
          authBtn.classList.add('hidden');
          logoutBtn.classList.remove('hidden');
          userInfo.classList.remove('hidden');
          
          // –í—ñ–¥–æ–±—Ä–∞–∂–∞—î–º–æ email –∞–±–æ —ñ–º'—è –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞, —è–∫—â–æ –≤–æ–Ω–æ —î
          const displayName = user.displayName || user.email.split('@')[0];
          userNickname.textContent = displayName;
          
          if (authModal) authModal.classList.add('hidden');
        } else {
          authBtn.classList.remove('hidden');
          logoutBtn.classList.add('hidden');
          userInfo.classList.add('hidden');
        }
      });
    }

    // –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –≤—ñ–∫–Ω–∞
    function toggleAuthModal() {
      authModal.classList.toggle('hidden');
      resetErrors();
    }

    // –ü–µ—Ä–µ–º–∏–∫–∞–Ω–Ω—è –º—ñ–∂ —Ñ–æ—Ä–º–∞–º–∏ –ª–æ–≥—ñ–Ω—É —Ç–∞ —Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
    function toggleForm() {
      isLoginForm = !isLoginForm;
      
      if (isLoginForm) {
        authTitle.textContent = '–£–≤—ñ–π—Ç–∏';
        toggleText.textContent = '–©–µ –Ω–µ –º–∞—î—à –∞–∫–∞—É–Ω—Ç—É?';
        toggleButton.textContent = '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–π—Å—è';
        authButton.textContent = '–£–≤—ñ–π—Ç–∏';
      } else {
        authTitle.textContent = '–†–µ—î—Å—Ç—Ä–∞—Ü—ñ—è';
        toggleText.textContent = '–í–∂–µ –º–∞—î—à –∞–∫–∞—É–Ω—Ç?';
        toggleButton.textContent = '–£–≤—ñ–π—Ç–∏';
        authButton.textContent = '–ó–∞—Ä–µ—î—Å—Ç—Ä—É–≤–∞—Ç–∏—Å—è';
      }
      
      resetErrors();
    }

    // –û–±—Ä–æ–±–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó/—Ä–µ—î—Å—Ç—Ä–∞—Ü—ñ—ó
    function handleAuth() {
      const email = emailInput.value;
      const password = passwordInput.value;
      
      if (!validateForm(email, password)) return;
      
      if (isLoginForm) {
        firebase.auth().signInWithEmailAndPassword(email, password)
          .then(() => toggleAuthModal())
          .catch(error => showError(getAuthErrorMessage(error)));
      } else {
        firebase.auth().createUserWithEmailAndPassword(email, password)
          .then(() => toggleAuthModal())
          .catch(error => showError(getAuthErrorMessage(error)));
      }
    }

    // –í–∏—Ö—ñ–¥ –∑ –∞–∫–∞—É–Ω—Ç—É
    function handleLogout() {
      firebase.auth().signOut()
        .then(() => checkAuthState())
        .catch(error => console.error('–ü–æ–º–∏–ª–∫–∞ –ø—Ä–∏ –≤–∏—Ö–æ–¥—ñ:', error));
    }

    // –í–∞–ª—ñ–¥–∞—Ü—ñ—è —Ñ–æ—Ä–º–∏
    function validateForm(email, password) {
      let isValid = true;
      
      const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
      if (!emailRegex.test(email)) {
        emailError.style.display = 'block';
        isValid = false;
      } else {
        emailError.style.display = 'none';
      }
      
      if (password.length < 6) {
        passwordError.style.display = 'block';
        isValid = false;
      } else {
        passwordError.style.display = 'none';
      }
      
      return isValid;
    }

    // –°–∫–∏–¥–∞–Ω–Ω—è –ø–æ–º–∏–ª–æ–∫
    function resetErrors() {
      emailError.style.display = 'none';
      passwordError.style.display = 'none';
      errorContainer.classList.add('hidden');
      errorContainer.textContent = '';
    }

    // –ü–æ–∫–∞–∑ –ø–æ–º–∏–ª–∫–∏
    function showError(message) {
      errorContainer.textContent = message;
      errorContainer.classList.remove('hidden');
    }

    // –ü–µ—Ä–µ–∫–ª–∞–¥ –ø–æ–≤—ñ–¥–æ–º–ª–µ–Ω—å –ø—Ä–æ –ø–æ–º–∏–ª–∫–∏ Firebase
    function getAuthErrorMessage(error) {
      switch (error.code) {
        case 'auth/invalid-email': return '–ù–µ–≤—ñ—Ä–Ω–∏–π —Ñ–æ—Ä–º–∞—Ç email';
        case 'auth/user-disabled': return '–¶–µ–π –∞–∫–∞—É–Ω—Ç –±—É–ª–æ –≤–∏–º–∫–Ω–µ–Ω–æ';
        case 'auth/user-not-found': return '–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á–∞ –∑ —Ç–∞–∫–∏–º email –Ω–µ –∑–Ω–∞–π–¥–µ–Ω–æ';
        case 'auth/wrong-password': return '–ù–µ–≤—ñ—Ä–Ω–∏–π –ø–∞—Ä–æ–ª—å';
        case 'auth/email-already-in-use': return '–¶–µ–π email –≤–∂–µ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è';
        case 'auth/weak-password': return '–ü–∞—Ä–æ–ª—å –ø–æ–≤–∏–Ω–µ–Ω –º—ñ—Å—Ç–∏—Ç–∏ —â–æ–Ω–∞–π–º–µ–Ω—à–µ 6 —Å–∏–º–≤–æ–ª—ñ–≤';
        case 'auth/operation-not-allowed': return '–¶—è –æ–ø–µ—Ä–∞—Ü—ñ—è –Ω–µ –¥–æ–∑–≤–æ–ª–µ–Ω–∞';
        default: return '–°—Ç–∞–ª–∞—Å—è –ø–æ–º–∏–ª–∫–∞. –°–ø—Ä–æ–±—É–π—Ç–µ —â–µ —Ä–∞–∑.';
      }
    }

    // –ö–æ—à–∏–∫
    function addToCart(name, price) {
      checkAuthBeforeOrder()
        .then(() => {
          const item = { name, price };
          const cart = JSON.parse(localStorage.getItem('cart') || '[]');
          cart.push(item);
          localStorage.setItem('cart', JSON.stringify(cart));
          updateCartModal();
        })
        .catch(() => {
          toggleAuthModal();
        });
    }

    function toggleCart() {
      const modal = document.getElementById('cartModal');
      modal.classList.toggle('hidden');
      if (!modal.classList.contains('hidden')) {
        updateCartModal();
      }
    }

    function updateCartModal() {
      const cart = JSON.parse(localStorage.getItem('cart') || '[]');
      const cartList = document.getElementById('cartItems');
      const totalText = document.getElementById('total');
      cartList.innerHTML = '';
      let total = 0;

      if (cart.length === 0) {
        cartList.innerHTML = '<li class="text-gray-400">–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π</li>';
        totalText.textContent = '';
      } else {
        cart.forEach(item => {
          const li = document.createElement('li');
          li.textContent = `${item.name} ‚Äî ${item.price} –≥—Ä–Ω`;
          cartList.appendChild(li);
          total += item.price;
        });
        totalText.textContent = `–ó–∞–≥–∞–ª–æ–º: ${total} –≥—Ä–Ω`;
      }
    }

    function clearCart() {
      localStorage.removeItem('cart');
      updateCartModal();
    }

    function proceedToCheckout() {
      checkAuthBeforeOrder()
        .then((user) => {
          const cart = JSON.parse(localStorage.getItem('cart') || '[]');
          if (cart.length === 0) {
            alert('–ö–æ—à–∏–∫ –ø–æ—Ä–æ–∂–Ω—ñ–π!');
            return;
          }
          // –¢—É—Ç –º–æ–∂–Ω–∞ –¥–æ–¥–∞—Ç–∏ –ª–æ–≥—ñ–∫—É –æ—Ñ–æ—Ä–º–ª–µ–Ω–Ω—è –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è
          alert(`–ó–∞–º–æ–≤–ª–µ–Ω–Ω—è –æ—Ñ–æ—Ä–º–ª–µ–Ω–æ! –î—è–∫—É—î–º–æ, ${user.displayName || user.email.split('@')[0]}!`);
          clearCart();
          toggleCart();
        })
        .catch(() => {
          toggleAuthModal();
          toggleCart();
        });
    }

    // –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –ø–µ—Ä–µ–¥ –∑–∞–º–æ–≤–ª–µ–Ω–Ω—è–º
    function checkAuthBeforeOrder() {
      return new Promise((resolve, reject) => {
        const user = firebase.auth().currentUser;
        if (user) {
          resolve(user);
        } else {
          reject('–ö–æ—Ä–∏—Å—Ç—É–≤–∞—á –Ω–µ –∞–≤—Ç–æ—Ä–∏–∑–æ–≤–∞–Ω–∏–π');
        }
      });
    }
  </script>
</body>
</html>